========================================
통합 관제 및 보안 관리 서버 프로젝트
========================================

【프로젝트 개요】
- 프로젝트명: 통합 관제 및 보안 관리 서버 (WpfApp5)
- 목적: 다중 클라이언트의 브라우저 활동을 실시간으로 모니터링하고 보안 관리
- 개발 환경: .NET 8.0, WPF, C#
- 아키텍처: TCP 서버-클라이언트 모델

【주요 기능】

1. TCP 서버 운영
   - 포트 5000에서 다중 클라이언트 동시 접속 지원
   - 비동기 방식으로 클라이언트 처리 (HandleClientAsync)
   - 클라이언트 IP 주소 자동 등록 및 관리

2. 실시간 브라우저 모니터링
   - 클라이언트로부터 브라우저 URL 수신
   - WebView2를 통한 실시간 웹페이지 미리보기
   - 선택한 클라이언트의 현재 접속 사이트 표시

3. 보안 차단 시스템
   - 관리자가 설정한 키워드 기반 차단
   - 차단 사이트 접속 시 즉시 경고 메시지 표시
   - 기본 차단 키워드: youtube.com, facebook.com, twitter.com

4. 시스템 리소스 모니터링
   - CPU 사용률 실시간 표시 (ProgressBar + 그래프)
   - RAM 사용량 모니터링 (16GB 기준)
   - 네트워크 속도 표시 (가상 데이터)
   - LiveCharts를 활용한 실시간 그래프 (최근 30개 데이터)

5. 사용자 관리
   - 접속 중인 클라이언트 IP 목록 표시
   - 클라이언트 선택 시 해당 사용자의 브라우저 활동 실시간 표시

【기술 스택】

- 프레임워크: .NET 8.0-windows
- UI: WPF (Windows Presentation Foundation)
- 네트워크: System.Net.Sockets (TcpListener, TcpClient)
- 성능 모니터링: System.Diagnostics.PerformanceCounter
- 차트 라이브러리: LiveCharts.Wpf (v0.9.7)
- 웹뷰: Microsoft.Web.WebView2 (v1.0.3650.58)

【시스템 구조】

┌─────────────────────────────────────┐
│     클라이언트 (WpfApp4)              │
│  - 브라우저 URL 자동 감시              │
│  - 2초마다 서버로 URL 전송             │
└──────────────┬──────────────────────┘
               │ TCP (포트 5000)
               ▼
┌─────────────────────────────────────┐
│     서버 (WpfApp5)                  │
│  - 다중 클라이언트 동시 처리           │
│  - URL 수신 및 차단 키워드 검사        │
│  - 실시간 웹뷰 표시                   │
│  - 시스템 리소스 모니터링              │
└─────────────────────────────────────┘

【핵심 코드 설명】

1. 서버 시작 (StartServer_Click)
   - TcpListener를 포트 5000에서 시작
   - AcceptTcpClientAsync로 클라이언트 대기
   - 각 클라이언트는 별도 Task로 처리

2. 클라이언트 처리 (HandleClientAsync)
   - 클라이언트 IP 추출 및 등록
   - NetworkStream을 통한 URL 수신
   - 수신한 URL을 소문자로 변환하여 저장
   - 보안 검사 및 웹뷰 업데이트

3. 보안 검사 (CheckSecurityAlert)
   - ForbiddenUrlInput의 키워드를 쉼표로 분리
   - 수신한 URL에 차단 키워드 포함 여부 확인
   - 차단 감지 시 MessageBox로 경고 표시

4. 시스템 모니터링 (StartMonitoring)
   - 1초마다 DispatcherTimer로 업데이트
   - PerformanceCounter로 CPU/RAM 정보 수집
   - LiveCharts에 데이터 추가 (최대 30개)

5. 웹뷰 업데이트 (UpdateWebView)
   - 선택된 클라이언트의 URL을 WebView2에 표시
   - http/https 프로토콜 자동 추가

【UI 구성】

- 왼쪽 패널: 시스템 리소스 모니터링 (CPU, RAM, 네트워크, 그래프)
- 중간 패널: 접속 중인 클라이언트 목록
- 오른쪽 패널: 선택한 클라이언트의 실시간 웹뷰
- 하단: 보안 차단 키워드 설정

【클라이언트와의 통신 프로토콜】

1. 클라이언트 → 서버
   - 전송 데이터: 브라우저 URL (UTF-8 인코딩)
   - 전송 시점: URL 변경 감지 시 (2초마다 체크)

2. 서버 → 클라이언트
   - 전송 데이터: "ALERT" 포함 경고 메시지
   - 전송 시점: 차단 사이트 접속 감지 시 (현재 미구현)

【주요 특징】

✓ 다중 클라이언트 동시 처리 (비동기)
✓ 실시간 모니터링 (1초 간격)
✓ 시각적 데이터 표현 (ProgressBar, 그래프)
✓ 사용자 친화적 UI (현대적인 디자인)
✓ 확장 가능한 차단 키워드 시스템

【개선 가능한 부분】

- 서버 → 클라이언트 ALERT 메시지 전송 기능 구현
- 차단 사이트 접속 시 자동 차단 기능
- 접속 로그 저장 기능
- 관리자 인증 시스템
- 데이터베이스 연동 (접속 이력 저장)

========================================

